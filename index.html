<html>
<head>
	<title>BGem3 v2</title>
	<script type="text/javascript" src="BGem3.js"></script>

	<style type="text/css">
		body {
			overflow:hidden;
			background-color:#fff;
			margin:0;
		}
		#viewport {
			display:block;
			position:fixed;
			width:100%;
			height:100%;
			z-index:1;
		}
	</style>
</head>
<body>

	<canvas id="viewport">
	</canvas>

	<script type="text/javascript">
		function init() {
			// create scene
			var scene = new BGem3.Scene( { bg:[ 142, 214, 255 ] } );

			var camera = new BGem3.Camera( { pos:[ 0, 0, -200 ], rot:[ 0, 10, 0 ], fl:800, speed:1, fr:0.1 } );

			var texture = new Image();
			texture.src = "img/squirtle.jpg";

			for ( var i=0; i<100; i++ ) {
				var spread = 150;
				var cube = new BGem3.Obj3D( new BGem3.CubeMesh({
						size:3, 
						pos:[ 
							Maths.random(-spread,spread)+0.1, 
							Maths.random(-20,-10)+0.1, 
							Maths.random(-spread,spread)+0.1 
						], 
						color:[ 102, 45, 145 ],
						fill:false
					}) );
				scene.objs.push( cube );
			}

			scene.cams.push( camera );

			var canvas = document.getElementById("viewport");
			var maxWidth = window.innerWidth;
			var maxHeight = window.innerHeight;
			var ctx = canvas.getContext('2d');
			canvas.width = maxWidth;
			canvas.height = maxHeight;

			var renderer = new BGem3.Renderer( scene, { fps:24, maxWidth:maxWidth, maxHeight:maxHeight, ctx:ctx } );
			var animate;
			var animationFrame = true;

			// initialize animation
			if ( animationFrame ) {
				setTimeout( window.requestAnimationFrame( render ), 1000 );
			} else {
				setTimeout( function() {
					animate = setInterval( render, renderer.interval );
				}, 1000);
			}
			function render() {
				if ( play ) {
					renderer.render();
					if ( animationFrame ) {
						window.requestAnimationFrame( render );   
					}
				}
			}

			var controller = new BGem3.Controller( scene, renderer );
			controller.init();
		}

		var play = true;

		function stopAnimation() {
			play = false;
		}
		window.onload = init;
	</script>
</body>
</html>
